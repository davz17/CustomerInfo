#pragma checksum "C:\Users\user\source\repos\CustomerInfo\CustomerInfo\Views\Home\Index.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "388d23233c397cae050bea49d60e07c18fa98854"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Home_Index), @"mvc.1.0.view", @"/Views/Home/Index.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/Home/Index.cshtml", typeof(AspNetCore.Views_Home_Index))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "C:\Users\user\source\repos\CustomerInfo\CustomerInfo\Views\_ViewImports.cshtml"
using CustomerInfo;

#line default
#line hidden
#line 2 "C:\Users\user\source\repos\CustomerInfo\CustomerInfo\Views\_ViewImports.cshtml"
using CustomerInfo.Models;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"388d23233c397cae050bea49d60e07c18fa98854", @"/Views/Home/Index.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"f8a245c7e3ab879528f49bc0faa4b425de3b4536", @"/Views/_ViewImports.cshtml")]
    public class Views_Home_Index : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("class", new global::Microsoft.AspNetCore.Html.HtmlString("w3-row-padding"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("action", new global::Microsoft.AspNetCore.Html.HtmlString("javascript:void(0);"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_2 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("method", "post", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_3 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("enctype", new global::Microsoft.AspNetCore.Html.HtmlString("multipart/form-data"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(0, 206, true);
            WriteLiteral("<div class=\"w3-card-2 w3-margin w3-white\">\r\n    <div class=\"w3-container w3-padding w3-blue-gray\">\r\n        <h6><b><i class=\"fa fa-dashboard\"></i> Import Customer File</b></h6>\r\n    </div>\r\n    <br />\r\n    ");
            EndContext();
            BeginContext(206, 516, false);
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "06eaa3ccd75b43d19d5829a375fc4ac1", async() => {
                BeginContext(308, 407, true);
                WriteLiteral(@"
        <div class=""form-group"">
            <input type=""file"" class=""form-control-file border"" name=""file"" id=""file"" accept="".csv"">
        </div>
        <div class=""form-group"" id=""importdetails"">
            <p id=""norows""></p>
            <button class=""btn btn-primary"" id=""import"" type=""submit""><b>Upload to database</b></button>
            <p id=""norowsuploaded""></p>
        </div>
    ");
                EndContext();
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper.Method = (string)__tagHelperAttribute_2.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_2);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_3);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            EndContext();
            BeginContext(722, 3489, true);
            WriteLiteral(@"
    <hr />
    <div class=""w3-container w3-padding"">
        <div>
            <table class=""w3-table-all w3-hoverable"" id=""timerecords""></table>
            <br />
        </div>
    </div>
    <br />
</div>
<!-- Modal-->
<div class=""w3-container"">
    <div id=""frmmodal"" class=""w3-modal"">
        <div class=""w3-modal-content w3-card-4 w3-animate-zoom"" id=""frmmodalsub"">
            <div class=""w3-center"">
                <header class=""w3-container w3-light-green"">
                    <h3>Process file</h3>
                </header>
            </div>
            <div class=""w3-container w3-padding"">
                <div class=""panel-body"" id=""readdetails"">Reading file..</div>
            </div>
        </div>
    </div>
</div>
<script>
    var jsondata = null;
    var norows = null;

    $(document).ready(function () {        
        $(""#importdetails"").css({ ""display"": ""none"" })
        $("".input-group-addon"").css({ ""cursor"": ""pointer"" })
        $(""#file"").change(function (");
            WriteLiteral(@"event) {
            var csv = event.target.files[0];
            var reader = new FileReader();                 
            $(""#frmmodal"").css({ ""display"": ""block"" });
            reader.readAsText(csv);
            reader.onload = function (e) {
                var csvData = e.target.result;
                jsondata = csvJSON(csvData);                
                $(""#norows"").html(""Records processed: "" + norows);
                $(""#frmmodal"").css({ ""display"": ""none"" });
                $(""#importdetails"").css({ ""display"": ""block"" })
                $(""#import"").css({ ""display"": ""block"" });
                $(""#norowsuploaded"").html(""""); 
            };
        });

        $(""#import"").click(function () { 
            $(""#frmmodal"").css({ ""display"": ""block"" });
            $(""#readdetails"").html(""Inserting to database."")
            
            if ($(""#file"").val() != """")
            { 
                $.ajax({
                    type: ""POST"",
                    url: ""/api/cu");
            WriteLiteral(@"stomers"",
                    contentType: ""application/json; charset=utf-8"",
                    data: jsondata,
                    success: function (data) {
                        $(""#frmmodal"").css({ ""display"": ""none"" });
                        $(""#norowsuploaded"").html(""Records inserted to database: "" + data);   
                        $(""#import"").css({""display"": ""none""});
                    },
                    failure: function (data) {
                        alert('Ajax failure:' + data.responseText);
                    }, 
                    error: function (data) {
                        alert('Ajax error:' + data.responseText);
                    }
                });
            }
        });

        function csvJSON(csv) {
            var lines = csv.split(""\n"");
            var result = [];
            var headers = lines[0].split("","");
            headers[8] = headers[8].replace(/\r/g, """");
            norows = lines.length - 2;
            for (var i = 1; ");
            WriteLiteral(@"i < lines.length - 1; i++) {
                var obj = {};
                var currentline = lines[i].split("","");               
                for (var j = 0; j < headers.length; j++) {
                    obj[headers[j]] = currentline[j].replace(/\r/g, """");
                }
                result.push(obj);
            }
            return JSON.stringify(result); //JSON
        }
    });

</script>");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
